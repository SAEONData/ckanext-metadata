{
    "$schema": "http://json-schema.org/draft-04/schema#",

    "type": "object",

    "properties": {
        "data_agreement": {
            "type": "object",
            "properties": {
                "accepted": {"type": "boolean", "const": true},
                "href": {"type": "string", "format": "url"}
            },
            "required": ["accepted", "href"]
        },
        "terms_and_conditions": {
            "type": "object",
            "properties": {
                "accepted": {"type": "boolean", "const": true}
            },
            "required": ["accepted"]
        },
        "capture_method": {
            "type": "string",
            "enum": ["harvester", "curator", "manual"]
        },
        "quality_control": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "userid": {"type": "string", "format": "userid", "role": "curator"},
                    "date": {"type": "string", "format": "date"}
                },
                "required": ["userid", "date"]
            },
            "minItems": 2,
            "uniqueItems": true,
            "$comment": "to fix: as it stands this sub-schema will not enforce different users, because of the date property"
        },
        "validated": {
            "type": "boolean",
            "const": true
        },
        "errors": {
            "$comment": "this sub-schema checks that 'identifier' etc are not in the errors dict",
            "type": "object",
            "properties": {
                "identifier": {"not": {}},
                "creators": {"not": {}},
                "titles": {"not": {}},
                "publisher": {"not": {}},
                "publicationYear": {"not": {}},
                "subjects": {"not": {}},
                "resourceType": {"not": {}},
                "resourceTypeGeneral": {"not": {}},
                "alternateIdentifiers": {"not": {}},
                "onlineResources": {"not": {}}
            }
        }
    },

    "required": [
        "data_agreement",
        "terms_and_conditions",
        "capture_method",
        "validated",
        "quality_control"
    ]
}
